#import utils
import xbmc
import xbmcaddon
import xbmcvfs
import re
import _utils as utils

fanart = xbmc.translatePath(xbmcaddon.Addon().getAddonInfo('profile')+'fanartZDF.xml').decode('utf-8')
dict = xbmc.translatePath(xbmcaddon.Addon().getAddonInfo('profile')+'fanartZDFDict.py').decode('utf-8')

dictQuali = {
             '184':'timg672x378blob',
             '500':'timg946x532blob',
             '1941852':'timg946x532blob',
             '2240096':'timg946x532blob',
             '332':'timg946x532blob',
             '1961272':'timg946x532blob',
             '492':'timg946x532blob',
             '2078314':'timg946x532blob',
             '1894606':'timg946x532blob',
             '1323446':'timg946x532blob',
             '1941834':'timg946x532blob',
             '368':'timg946x532blob',
             '1586980':'timg672x378blob',
             '2285190':'timg946x532blob',
             '2472786':'timg946x532blob',
             '2108708':'timg946x532blob',
             '1422888':'timg946x532blob',
             '402886':'timg672x378blob',
             '2100382':'timg946x532blob',
             '885972':'timg672x378blob',
             '1579680':'timg946x532blob',
             '2041610':'timg946x532blob',
             '2513956':'timg946x532blob',
             '1384814':'timg946x532blob',
             '2109870':'timg946x532blob',
             '402':'timg946x532blob',
             '1514560':'timg672x378blob',
             '218522':'timg946x532blob',
             '960798':'timg946x532blob',
             '1025148':'timg946x532blob',
             '2063146':'timg946x532blob',
             '1755562':'timg946x532blob',
             '326':'timg946x532blob',
             '2486024':'timg946x532blob',
             '494':'timg946x532blob',
             '1229010':'timg946x532blob',
             '400':'timg672x378blob',
             '526':'timg946x532blob',
             '2431490':'timg946x532blob',
             '1400454':'timg644x363blob',
             '379348':'timg946x532blob',
             '404':'timg672x378blob',
             '2191666':'timg946x532blob',
             '233818':'timg946x532blob',
             '2495796':'timg946x532blob',
             '1204310':'timg644x363blob',
             '1954292':'timg946x532blob',
             '565650':'timg946x532blob',
             '2364608':'timg946x532blob',
             '394110':'timg946x532blob',
             '2617976':'timg946x532blob',
             '454':'timg946x532blob',
             '361328':'timg946x532blob',
             '618212':'timg946x532blob',
             '2648922':'timg946x532blob',
             '1713362':'timg946x532blob',
             '2640666':'timg946x532blob',
             '180':'timg946x532blob',
             '2179086':'timg946x532blob',
             '428':'timg946x532blob',
             '1728272':'timg946x532blob',
             '2426296':'timg946x532blob',
             '2353242':'timg946x532blob',
             '518':'timg946x532blob',
             '1216818':'timg946x532blob',
             '322':'timg946x532blob',
             '640618':'timg946x532blob',
             '2588770':'timg946x532blob',
             '2651230':'timg946x532blob',
             '2399600':'timg946x532blob',
             '1431160':'timg946x532blob',
             '1647210':'timg946x532blob',
             '538':'timg946x532blob',
             '2343646':'timg946x532blob',
             '2343642':'timg946x532blob',
             '1901618':'timg946x532blob',
             '2022868':'timg946x532blob',
             '460':'timg946x532blob',
             '1829656':'timg946x532blob',
             '1994798':'timg946x532blob',
             '204':'timg946x532blob',
             '2159022':'timg946x532blob',
             '2661922':'timg946x532blob',
             '348':'timg946x532blob',
             '210':'timg946x532blob',
             '1816704':'timg672x378blob',
             '1324824':'timg946x532blob',
             '1998266':'timg946x532blob',
             '448':'timg946x532blob',
             '1522522':'timg672x378blob',
             '1427676':'timg946x532blob',
             '760014':'timg946x532blob',
             '2078040':'timg946x532blob',
             '1074276':'timg946x532blob',
             '166':'timg946x532blob',
             '246':'timg946x532blob',
             '228':'timg946x532blob',
             '496':'timg946x532blob',
             '2343626':'timg946x532blob',
             '2400684':'timg946x532blob',
             '1788948':'timg946x532blob',
             '1779466':'timg644x363blob',
             '2209002':'timg946x532blob',
             '186':'timg644x363blob',
             '2114234':'timg946x532blob',
             '2518054':'timg946x532blob',
             '2502664':'timg946x532blob',
             '1321386':'timg946x532blob',
             '484':'timg946x532blob',
             '2515020':'timg946x532blob',
             '2343658':'timg946x532blob',
             '416':'timg946x532blob',
             '1779886':'timg946x532blob',
             '382':'timg946x532blob',
             '2329514':'timg946x532blob',
             '182':'timg946x532blob',
             '158':'timg946x532blob',
             '509418':'timg946x532blob',
             '258':'timg644x363blob',
             '377410':'timg644x363blob',
             '2443730':'timg946x532blob',
             '1274336':'timg946x532blob',
             '2486568':'timg946x532blob',
             '414':'timg946x532blob',
             '188':'timg946x532blob',
             '462':'timg946x532blob',
             '434':'timg946x532blob',
             '2651232':'timg946x532blob',
             '2288228':'timg946x532blob',
             '2502780':'timg946x532blob',
             '446':'timg946x532blob',
             '384750':'timg946x532blob',
             '2480150':'timg946x532blob',
             '1921504':'timg946x532blob',
             '2037548':'timg946x532blob',
             '2194666':'timg946x532blob',
             '2488680':'timg946x532blob',
             '468':'timg672x378blob',
             '1688416':'timg946x532blob',
             '1600896':'timg946x532blob',
             '2663158':'timg946x532blob',
             '2586208':'timg946x532blob',
             '1256648':'timg946x532blob',
             '2341480':'timg946x532blob',
             '1328644':'timg946x532blob',
             '1457670':'timg946x532blob',
             '370':'timg946x532blob',
             '1704486':'timg672x378blob',
             '2591774':'timg946x532blob',
             '2585374':'timg946x532blob',
             '399020':'timg946x532blob',
             '392':'timg672x378blob',
             '2078042':'timg946x532blob',
             '1869834':'timg946x532blob',
             '1513656':'timg946x532blob',
             '1859968':'timg946x532blob',
             '2353942':'timg946x532blob',
             '2303138':'timg946x532blob',
             '2484058':'timg946x532blob',
             '516':'timg946x532blob',
             '218':'timg672x378blob',
             '534':'timg672x378blob',
             '530':'timg672x378blob',
             '862832':'timg946x532blob',
             '478':'timg946x532blob',
             '388':'timg946x532blob',
             '244':'timg946x532blob',
             '1617708':'timg946x532blob',
             '480':'timg946x532blob',
             '391854':'timg946x532blob',
             '843732':'timg946x532blob',
             '384':'timg946x532blob',
             '2060722':'timg946x532blob',
             '330':'timg946x532blob',
             '1327956':'timg946x532blob',
             '2143538':'timg946x532blob',
             '2344312':'timg946x532blob',
             '2154962':'timg946x532blob',
             '2341460':'timg946x532blob',
             '168':'timg946x532blob',
             '2641752':'timg946x532blob',
             '440':'timg672x378blob',
             '1967600':'timg946x532blob',
             '1254862':'timg946x532blob',
             '442':'timg672x378blob',
             '436':'timg946x532blob',
             '1413280':'timg946x532blob',
             '1626954':'timg672x378blob',
             '2609256':'timg946x532blob',
             '2609242':'timg946x532blob',
             '225948':'timg946x532blob',
             '1518998':'timg946x532blob',
             '1315152':'timg946x532blob',
             '324':'timg946x532blob',
             '2120210':'timg946x532blob'
            }

def getFanart(id):
	if dictQuali.has_key(id):
		u = 'http://www.zdf.de/ZDFmediathek/contentblob/'+id+'/'+dictQuali[id]+'/0'
		u = u.replace('timg946x532blob','timg672x378blob')
		return u
	else:
		print '#### ZDF Sendung unbekannt: '+id
		#print 'http://www.zdf.de/ZDFmediathek/contentblob/'+id+'/timg946x532blob/0'
		return 'http://www.zdf.de/ZDFmediathek/contentblob/'+id+'/timg946x532blob/0'
def addFanart(list):
	t = utils.f_open(fanart)
	print list
	change = False
	for id,quality in list:
		#if not dictBc2Th.has_key(id) and not '<id>'+id+'</id>' in t:
		if not '<id>'+id+'</id>' in t:
			change = True
			t+='  '+'<id>'+id+'</id>'+'<quality>'+quality+'</quality>'+'\n'
	if change:
		utils.f_write(fanart,t)
	
def xml2dict():
	data = utils.f_open(fanart)
	match = re.compile('<id>(.+?)</id><quality>(.+?)</quality>', re.DOTALL).findall(data)
	s = 'dictQuali = {\n'
	
	for id,quality in match:
		s +="             \'"+id+"':'"+quality+"',\n"
	s +="            }"#last line!!!
	utils.f_write(dict,s)